# test for realm state persistence (to be removed)

## start a new node
gnoland start

## add bar.gno package located in $WORK directory
gnokey maketx addpkg -pkgdir $WORK -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test test1

stdout 'OK!'
stdout 'GAS WANTED: 2000000'
stdout 'GAS USED:   [0-9]+'

## execute Increment
gnokey maketx call -pkgpath gno.land/r/temp/counter@v1.0.0 -func Increment -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test test1

## compare render
stdout '(1 int)'
stdout 'OK!'
stdout 'GAS WANTED: 2000000'
stdout 'GAS USED:   [0-9]+'

## execute Count
gnokey maketx call -pkgpath gno.land/r/temp/counter@v1.0.0 -func Count -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test test1

## compare render
stdout '(1 int)'
stdout 'OK!'
stdout 'GAS WANTED: 2000000'
stdout 'GAS USED:   [0-9]+'

-- counter.gno --
package counter

var counter int

func Increment() int {
 	counter += 1
        return counter
}

func Decrement() int {
 	counter -= 1
        return counter
}

func Count() int {
        return counter
}

-- gno.mod --
module gno.land/r/temp/counter v1.0.0
