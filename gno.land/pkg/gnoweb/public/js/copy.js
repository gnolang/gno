var a=class s{DOM;static FEEDBACK_DELAY=750;btnClicked=null;btnClickedIcons=[];isAnimationRunning=!1;static SELECTORS={button:".js-copy-btn",icon:"[data-copy-icon] > use",content:e=>`[data-copy-content="${e}"]`};constructor(){this.DOM={el:document.querySelector("main")},this.DOM.el?this.init():console.warn("Copy: Main container not found.")}init(){this.bindEvents()}bindEvents(){this.DOM.el?.addEventListener("click",this.handleClick.bind(this))}handleClick(e){let t=e.target.closest(s.SELECTORS.button);if(!t)return;this.btnClicked=t,this.btnClickedIcons=Array.from(t.querySelectorAll(s.SELECTORS.icon));let o=t.getAttribute("data-copy-txt");if(o){this.copyTextToClipboard(o,this.btnClickedIcons);return}let i=t.getAttribute("data-copy-target");if(i){let r=this.DOM.el?.querySelector(s.SELECTORS.content(i));if(!r){console.warn(`Copy: No content found for source "${i}".`);return}this.copyToClipboard(r,this.btnClickedIcons,!1);return}let n=t.getAttribute("data-copy-btn");if(n){let r=this.DOM.el?.querySelector(s.SELECTORS.content(n));if(r){let c=t.hasAttribute("data-copy-remove-comments");this.copyToClipboard(r,this.btnClickedIcons,c)}else console.warn(`Copy: No content found for ID "${n}".`);return}console.warn("Copy: No content to copy found on the button.")}sanitizeContent(e,t=!1){let o=e.innerHTML.replace(/<span[^>]*class="chroma-ln"[^>]*>[\s\S]*?<\/span>/g,""),i=document.createElement("div");i.innerHTML=o;let n=i.textContent?.trim()||"";return t&&(n=n.split(`
`).filter(r=>{let c=r.trim();return c&&!c.match(/^[#/*]/)}).join(`
`)),n}toggleIcons(e){e.forEach(t=>{t.classList.toggle("hidden")})}showFeedback(e){!this.btnClicked||this.isAnimationRunning===!0||(this.isAnimationRunning=!0,this.toggleIcons(e),window.setTimeout(()=>{this.toggleIcons(e),this.isAnimationRunning=!1},s.FEEDBACK_DELAY))}async copyTextToClipboard(e,t){if(!navigator.clipboard){console.error("Copy: Clipboard API is not supported in this browser."),this.showFeedback(t);return}try{await navigator.clipboard.writeText(e.trim()),this.showFeedback(t)}catch(o){console.error("Copy: Error while copying text.",o),this.showFeedback(t)}}async copyToClipboard(e,t,o=!1){let i=this.sanitizeContent(e,o);if(!navigator.clipboard){console.error("Copy: Clipboard API is not supported in this browser."),this.showFeedback(t);return}try{await navigator.clipboard.writeText(i),this.showFeedback(t)}catch(n){console.error("Copy: Error while copying text.",n),this.showFeedback(t)}}},l=()=>new a;export{l as default};
