function c(n,e=250){let t;return function(...r){t!==void 0&&clearTimeout(t),t=setTimeout(()=>{n.apply(this,r)},e)}}var a=class n{DOM;static SELECTORS={range:".js-list-range",searchBar:".js-list-searchbar",orderOption:".js-list-order-filter",itemTitle:".js-list-range-title",packagesCount:".js-list-packages-count",realmsCount:".js-list-realms-count",pureCount:".js-list-pure-count"};static STORAGE_KEY="gno_display_mode";static LOADING_CLASS="is-loading";items=[];currentFilter="";sortedItems=[];constructor(e){if(!e){console.warn("No element provided");return}if(this.DOM={el:e,range:e.querySelector(n.SELECTORS.range),searchBar:e.querySelector(n.SELECTORS.searchBar),orderOption:e.querySelector(n.SELECTORS.orderOption),packagesCount:e.querySelector(n.SELECTORS.packagesCount),realmsCount:e.querySelector(n.SELECTORS.realmsCount),pureCount:e.querySelector(n.SELECTORS.pureCount)},!this.DOM.range){console.warn("Range element not found");return}this.items=Array.from(this.DOM.range.children).map(t=>{let r=t.querySelector(n.SELECTORS.itemTitle),s=t.dataset.type||"";return{element:t,title:(r?.textContent||"").toLowerCase(),type:s}}),this.sortedItems=[...this.items],this.restoreDisplayMode(),this.bindEvents(),requestAnimationFrame(()=>{e.classList.remove(n.LOADING_CLASS)})}bindEvents(){let{searchBar:e,orderOption:t}=this.DOM;t?.addEventListener("change",r=>{r.target.matches('input[name="order-mode"]')&&(this.sortItems(),this.updateDOM())}),this.DOM.el?.addEventListener("change",r=>{let s=r.target;s.matches('input[name="display-mode"]')&&localStorage.setItem(n.STORAGE_KEY,s.value)}),e?.addEventListener("input",r=>{let s=r.target;this.debouncedSearch(s.value)})}restoreDisplayMode(){let e=localStorage.getItem(n.STORAGE_KEY);if(!e)return;let t=this.DOM.el?.querySelector(`input[name="display-mode"][value="${e}"]`);t&&!t.checked&&(t.checked=!0)}debouncedSearch=c(e=>{this.currentFilter=e.toLowerCase(),this.updateDOM()},150);sortItems(){this.sortedItems.reverse()}filterItems(){return this.currentFilter?this.sortedItems.filter(e=>e.title.includes(this.currentFilter)):this.sortedItems}updateCounts(e){let{packagesCount:t,realmsCount:r,pureCount:s}=this.DOM,o=e.reduce((i,m)=>(i[m.type]=(i[m.type]||0)+1,i),{}),l=o.realm||0,u=o.pure||0,p=l+u;t&&(t.textContent=p.toString()),r&&(r.textContent=l.toString()),s&&(s.textContent=u.toString())}updateDOM(){let{range:e}=this.DOM;if(!e)return;let t=this.filterItems(),r=document.createDocumentFragment();t.forEach(s=>r.appendChild(s.element)),e.textContent="",e.appendChild(r),this.updateCounts(t)}},h=n=>new a(n);export{h as default};
