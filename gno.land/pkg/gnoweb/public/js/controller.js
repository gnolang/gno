function b(r,t=250){let e;return function(...n){e!==void 0&&clearTimeout(e),e=setTimeout(()=>r.apply(this,n),t)}}function f(r){return r.replace(/([$`"\\!|&;<>*?{}()])/g,"\\$1")}function m(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function a(r){return r=r.replace(/-([a-z])/g,(t,e)=>e.toUpperCase()),r.charAt(0).toLowerCase()+r.slice(1)}function o(r,t){return r.matches(t)?r:r.querySelector(t)}function l(r,t){let e=[];return r.matches(t)&&e.push(r),e.push(...Array.from(r.querySelectorAll(t))),e}var d=class{element;initialized=!1;DOM={};controllerName;controllerKebabName;constructor(t){this.element=t,this.controllerName=a(this.getControllerName()),this.controllerKebabName=m(this.controllerName),this.init()}init(){this.initialized||(this.connect(),this.setupActions(),this.initialized=!0)}initializeDOM(t){return this.DOM={el:this.element,...t},t}getDOMElement(t){return Array.isArray(this.DOM[t])?this.DOM[t][0]:this.DOM[t]}getDOMArray(t){let e=this.DOM[t];return e?Array.isArray(e)?e:[e]:[]}getTarget(t,e){let n=e||this.element,s=`[data-${this.controllerKebabName}-target="${t}"]`;return o(n,s)}getTargets(t,e){let n=e||this.element;return l(n,`[data-${this.controllerKebabName}-target="${t}"]`)}getGlobalTarget(t){return document.querySelector(`[data-${this.controllerKebabName}-target="${t}"]`)}setupActions(){l(this.element,"[data-action]").forEach(e=>{let n=e.getAttribute("data-action");if(n){let[s,i]=n.split("->"),[p,h]=i.split("#");if(p===this.controllerKebabName){let c=this[h];typeof c=="function"&&e.addEventListener(s,u=>{let g=this.extractActionParams(e);u.params=g,c.call(this,u)})}}})}extractActionParams(t){let e={};for(let[n,s]of Object.entries(t.dataset))if(n.startsWith(this.controllerName)&&n.endsWith("Param")){let i=a(n.slice(this.controllerName.length,-5));e[i]=this.parseParamValue(s)}return e}parseParamValue(t){if(t==null||t.trim()==="")return"";let e=t.trim();if(/^(true|false)$/i.test(e))return e.toLowerCase()==="true";if(/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(e)){let n=Number(e);if(!Number.isNaN(n)&&Number.isFinite(n))return n}if(/^(null|undefined)$/i.test(e))return e.toLowerCase()==="null"?null:void 0;if(/^[{[]/.test(e)||/^".*"$/.test(e))try{return JSON.parse(e)}catch{}return t}getValue(t,e){let n=`data-${this.controllerKebabName}-${t}-value`,s=e||this.element,i=o(s,`[${n}]`);return i&&i.getAttribute(n)||""}setValue(t,e,n){let s=`data-${this.controllerKebabName}-${t}-value`;(n||this.element).setAttribute(s,e)}hasValue(t,e){let n=`data-${this.controllerKebabName}-${t}-value`,s=e||this.element;return o(s,`[${n}]`)!==null}on(t,e){document.addEventListener(t,e)}dispatch(t,e={}){let n=new CustomEvent(t,{detail:e,bubbles:!0});document.dispatchEvent(n)}getControllerName(){let t=this.element.getAttribute("data-controller");return t||this.constructor.name.replace(/^_/,"").replace(/Controller$/,"")}};export{d as BaseController,b as debounce,f as escapeShellSpecialChars,l as findAllInclusive,o as findFirstInclusive,a as toCamelCase,m as toKebabCase};
