import{BaseController as m}from"./controller.js";var i="theme",o="system",n=["system","light","dark"];function a(t){return t==="system"||t==="light"||t==="dark"}var h=class extends m{connect(){let{sun:e,moon:r,system:s}=this.initializeDOM({sun:this.getTarget("sun"),moon:this.getTarget("moon"),system:this.getTarget("system")});this.sun=e,this.moon=r,this.system=s;try{let c=localStorage.getItem(i);this.preference=a(c)?c:o}catch{this.preference=o}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.preference==="system"&&this.applyTheme()}),this.applyTheme()}toggle(){let e=n.indexOf(this.preference);this.preference=n[(e+1)%n.length];try{localStorage.setItem(i,this.preference)}catch{}this.applyTheme()}applyTheme(){let e=this.preference==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.preference;document.documentElement.setAttribute("data-theme",e);for(let[r,s]of[[this.sun,"light"],[this.moon,"dark"],[this.system,"system"]])r?.classList.toggle("u-hidden",this.preference!==s)}};export{h as ThemeController};
