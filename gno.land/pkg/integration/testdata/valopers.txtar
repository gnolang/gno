loadpkg gno.land/r/gnoland/valopers
loadpkg gno.land/r/gnoland/valopers_proposal

gnoland start

# add a valoper with a bad address
! gnokey maketx call -pkgpath gno.land/r/gnoland/valopers -func Register -gas-fee 1000000ugnot -gas-wanted 30000000 -send 20000000ugnot -args berty -args "My validator description" -args 1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl -args gpub1pgfj7ard9eg82cjtv4u4xetrwqer2dntxyfzxz3pq0skzdkmzu0r9h6gny6eg8c9dc303xrrudee6z4he4y7cs5rnjwmyf40yaj -args "g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://127.0.0.1:26656,g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://192.168.1.10:26656" -broadcast -chainid=tendermint_test test1
stderr 'panic: invalid address'

# add a valoper with a bad pubkey
! gnokey maketx call -pkgpath gno.land/r/gnoland/valopers -func Register -gas-fee 1000000ugnot -gas-wanted 30000000 -send 20000000ugnot -args berty -args "My validator description" -args g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl -args gpub1pgfj7ard9eg82cjtv4u4xetrwqer2dntxyfzxz3pq0skzdkmzu0r9h6gny6eg8c9dc303xrrudee6z4he4y7cs5rnjwmyf40zzz -args "g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://127.0.0.1:26656,g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://192.168.1.10:26656" -broadcast -chainid=tendermint_test test1
stderr 'panic: invalid checksum'

# add a valoper
gnokey maketx call -pkgpath gno.land/r/gnoland/valopers -func Register -gas-fee 1000000ugnot -gas-wanted 30000000 -send 20000000ugnot -args berty -args "My validator description" -args g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl -args gpub1pgfj7ard9eg82cjtv4u4xetrwqer2dntxyfzxz3pq0skzdkmzu0r9h6gny6eg8c9dc303xrrudee6z4he4y7cs5rnjwmyf40yaj -args "g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://127.0.0.1:26656,g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl@tcp://192.168.1.10:26656" -broadcast -chainid=tendermint_test test1
stdout OK!

# see the valoper in the Render
gnokey maketx call -pkgpath gno.land/r/gnoland/valopers -func Render -gas-fee 1000000ugnot -gas-wanted 10000000 -args "" -broadcast -chainid=tendermint_test test1
stdout OK!
stdout '\* \[berty\]'

# make a proposal for a non-existing valoper
! gnokey maketx call -pkgpath gno.land/r/gnoland/valopers_proposal -func MakeProposal -gas-fee 1000000ugnot -gas-wanted 20000000 -send 100000000ugnot -args g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh -broadcast -chainid=tendermint_test test1
stderr 'panic: valoper does not exist'

# make a proposal
gnokey maketx call -pkgpath gno.land/r/gnoland/valopers_proposal -func MakeProposal -gas-fee 1000000ugnot -gas-wanted 20000000 -send 100000000ugnot -args g1ut590acnamvhkrh4qz6dz9zt9e3hyu499u0gvl -broadcast -chainid=tendermint_test test1
stdout OK!

# see the valoper in gov/dao Render
gnokey maketx call -pkgpath gno.land/r/gov/dao/v2 -func Render -gas-fee 1000000ugnot -gas-wanted 10000000 -args "" -broadcast -chainid=tendermint_test test1
stdout OK!
stdout 'Add valoper berty'