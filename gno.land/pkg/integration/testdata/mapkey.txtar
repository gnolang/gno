# test issue

loadpkg gno.land/r/demo/realm $WORK

# start a new node
gnoland start

gnokey maketx call -pkgpath gno.land/r/demo/realm --func Register --gas-fee 1000000ugnot --gas-wanted 2000000 --broadcast -chainid=tendermint_test test1
gnokey maketx call -pkgpath gno.land/r/demo/realm --func Set --args 4 --gas-fee 1000000ugnot --gas-wanted 2000000 --broadcast -chainid=tendermint_test test1
gnokey maketx call -pkgpath gno.land/r/demo/realm --func Render --gas-fee 1000000ugnot --gas-wanted 2000000 --broadcast -chainid=tendermint_test test1
stdout '("0key.num:1" string)'

-- realm.gno --
package main

import "strconv"

type stringMap map[int]int

var (
	key int = 1
	accounts = stringMap{}
)

func Register(cur realm) {
	accounts[key] = 1
}

func Set(cur realm, v int) {
	key = v
}

func Render(cur realm) string {
	i := 0
	s := ""
	for k := range accounts {
		s += ""+ strconv.Itoa(i) + "key.num:"+ strconv.Itoa(k)
		i++
	}
	return s
}