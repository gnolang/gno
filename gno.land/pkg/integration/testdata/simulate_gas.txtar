# load the package
loadpkg gno.land/r/simulate $WORK/simulate

# start a new node
gnoland start

# simulate only
gnokey maketx call -pkgpath gno.land/r/simulate -func Hello -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test -simulate only test1
stdout 'GAS USED:   110247'

# simulate skip
gnokey maketx call -pkgpath gno.land/r/simulate -func Hello -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test -simulate skip test1
stdout 'GAS USED:   110247' # same as simulate only

# simulate only (again) with default 5% margin
gnokey maketx call -pkgpath gno.land/r/simulate -func Hello -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test -simulate only test1
stdout 'gas fee: 116ugnot'

# simulate only with no gas fee margin. base gas fee is 111ugnot
gnokey maketx call -pkgpath gno.land/r/simulate -func Hello -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test -simulate only -gas-fee-margin=0 test1
stdout 'gas fee: 111ugnot'

# the 5% margin was 5ugnot (116 - 111). the 10% margin should be about 10ugnot (11), total of 121
gnokey maketx call -pkgpath gno.land/r/simulate -func Hello -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid=tendermint_test -simulate only -gas-fee-margin=10 test1
stdout 'gas fee: 122ugnot'

-- package/package.gno --
package call_package

func Render() string {
 	return "notok"
}
-- simulate/simulate.gno --
package simulate

func Hello(cur realm) string {
	return "Hello"
}
