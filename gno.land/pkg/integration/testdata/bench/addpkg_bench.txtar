# Test package deployment with benchops profiling
#
# Profile outputs are automatically written to this file when
# running with UPDATE_SCRIPTS=true

gnoland start

# Profile the addpkg transaction
bench start profile.json

gnokey maketx addpkg -pkgdir $WORK/counter -pkgpath gno.land/r/$test1_user_addr/counter -gas-fee 1000000ugnot -gas-wanted 2000000 -broadcast -chainid tendermint_test test1

bench stop

-- counter/gnomod.toml --
module = "counter"
gno = "0.9"

-- counter/counter.gno --
package counter

var count int

func Inc(cur realm) int {
	count++
	return count
}

func Get() int {
	return count
}
-- profile.json --
Opcodes:
  OpEval: count=26 gas=29
  OpExec: count=2 gas=25
  OpFieldType: count=6 gas=59
  OpFuncType: count=4 gas=81
  OpHalt: count=20 gas=1
  OpPopBlock: count=18 gas=3
  OpValueDecl: count=2 gas=113
  OpVoid: count=84 gas=1
HotSpots:
  counter.gno:3 -: count=6 gas=334
