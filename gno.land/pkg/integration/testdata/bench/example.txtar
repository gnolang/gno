# Example: Bench Command Usage
#
# This example demonstrates the bench commands available in txtar tests.
#
# ---- Available Commands ----
#
#   bench start <filename.json>
#       Start profiling. Filename MUST end with .json or .jsonl.
#       Output will be written as JSON to the specified file.
#
#   bench stop
#       Stop profiling. Writes JSON to file and outputs golden format to stdout.
#       Use `cmp stdout expected.golden` to compare the output.
#
#   jsonbench <file.json> [sections]
#       Parse and display bench profile in deterministic golden format.
#       File MUST end with .json or .jsonl.
#       Sections: opcodes, store, native, hotspots, subops, vars, all (comma-separated)
#
#   cmpbench <file1.json> <file2.json> [sections]
#       Compare two bench profiles by their deterministic fields.
#       Files MUST end with .json or .jsonl.
#       Use with ! prefix to assert files differ: ! cmpbench a.json b.json
#
# ---- Workflow ----
#
#   bench start profile.json
#   # ... run gno code ...
#   bench stop
#   cmp stdout profile.golden    # compare golden output
#
# ---- Updating Golden Files ----
#
# Run tests with UPDATE_SCRIPTS=true to update embedded golden output:
#
#   UPDATE_SCRIPTS=true go test -tags gnobench ./...
#
# Or use the Makefile target:
#
#   make update.benchops

gnoland start

# Test basic bench start/stop cycle
bench start first.json
bench stop
cmp stdout first.golden

# Test multiple bench cycles
bench start second.json
bench stop
cmp stdout second.golden

-- first.golden --
-- second.golden --
-- first.json --
-- second.json --
