package main

import (
	"gno.land/r/demo/tests"
)

type MyBar struct {
	A int
	B *tests.Foo
}

func (f *MyBar) Bar(x int) {
	f.B.A = x
}

func main() {
	x := (struct {
		A int
		B *tests.Foo
	})(*tests.MyFoo)

	y := MyBar(x)
	z := &y
	println(tests.MyFoo)
	z.Bar(10) // <<< this should panic
	println(tests.MyFoo)
  
// the exploiter can update tests.MyFoo
// (struct{(1 int),(&(struct{(2 int),(nil *gno.land/r/demo/tests.Foo)} gno.land/r/demo/tests.Foo) *gno.land/r/demo/tests.Foo)} gno.land/r/demo/tests.Foo)
// (struct{(1 int),(&(struct{(10 int),(nil *gno.land/r/demo/tests.Foo)} gno.land/r/demo/tests.Foo) *gno.land/r/demo/tests.Foo)} gno.land/r/demo/tests.Foo)
}

// Error:
// 
