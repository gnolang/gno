# Run gno precompile with -skip-fmt flag
# NOTE(tb): this flag doesn't actually prevent the code format, because
# `gnolang.Precompile()` calls `format.Node()`.

gno precompile -skip-fmt .

! stdout .+
! stderr .+

cmp main.gno.gen.go main.gno.gen.go.golden
cmp sub/sub.gno.gen.go sub/sub.gno.gen.go.golden

-- main.gno --
package main

func main(){}

-- sub/sub.gno --
package sub

-- main.gno.gen.go.golden --
// Code generated by github.com/gnolang/gno. DO NOT EDIT.

//go:build gno

package main

func main() {}
-- sub/sub.gno.gen.go.golden --
// Code generated by github.com/gnolang/gno. DO NOT EDIT.

//go:build gno

package sub
